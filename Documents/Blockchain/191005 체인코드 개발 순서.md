# 🧩 191005(토) 체인코드 개발 순서

191005 하이퍼레저 패브릭 오픈클래스 필기

### 1. 개발환경 구축

- go언어 설치

- - c랑 비슷비슷
  - [golang.site](http://golang.site) : go 공부하기 좋은 사이트
  - 인텔리제이(?) 젯브레인 툴 학생은 무료^_^ (ws, go는 쓰면 좋을듯)

- Viscose 설치 및 플러그인

- - Go  플러그인 설치
  - docker도 플러그인 있음
  - IBM blockchain platform 플로그인 설치

- 환경 설정

- - GOPATH 설정
  - 하이퍼레저 패브릭 소스코드 가져오기 (뒤에 경로 생성해줘야함)
  - 하이퍼레저 패브릭 ca 소스코드 가져오기







### 2.스마트 컨트랙트 개발

- 각 노드들의 역할 제한

- Chanel policy를 둬야함

- - 참여 조직 제한

- 체인코드 설계

- - 자료구조(필드명/필드타입/명세) -> 상태코드같은거 들어가야함

  - 상태 흐름도 -> 화살표 하나하나가 함수

  - 체인코드 라이브러리 주요 함수 사용하기(package shim)

  - - 역할 강제하는데 쓰는 함수(getID, getMSPID) -> shim 아닌 다른 패키지에 있다.

  - 체인코드 함수 설계(함수명/파라미터/명세) -> 함수마다 호출할 수 있는 노드 다르게

  - GOVENDOR : 고 프로젝트의 의존성이 있는 모듈 관리하는 툴 -> 설치하자

  - 스마트 컨트랙트 개발(코드짜기)

  - - 필수로 구현해야하는 함수 : 하이퍼레저를 사용한다면 chaincodeStubInterface에 맞춰서 구현해야해서 init, invoke 꼭 구현해야함.

    - Go는 함수를 해시맵에 넣을 수 있음 -> 함수 해시맵 만들어놓음 -> 그 후 호출

    - 주석 잘 달기

    - 이력 가져오는거 잘 짜야함 -> 자료가 왕많아서 잘못하면 과부하걸림

    - 하나의 키값으로 너무 많은 원장 가져오지 않도록 해야함

    - Crypto-config.yaml : 노드들 설정하는 파일 -> MSP정보 생성할때 쓰임

    - 키관리 엄청 중요! (공개된 장소에 배포하는데 키값 올리면 절대!! 안됨)

    - Configtx.yaml : 오더러 조직의 정책들 설정 . 채널 설정(다른채널 만들기도 됨)

    - 제네시스 블록 , 트랜잭션들 만들기

    - 도커 컴포즈 파일 만들기 -> 인터넷에 레퍼런스 많으니 참조해서 작성^_^

    - - 도커 설정값들이 중요
      - 네트워크 이전상태 기억 : /var/hyperledger/production(컨테이너에 있는 정보)를 볼륨마운트 해주면 됨







### 3. 스마트 컨트랙트 테스트

- 피어 떠있는거 확인

- 체인코드 호출 (여기서는 cli로 안하고 node.js로 함)

- - 체인코드 응답할때 시간기록은 중요하게 고려할 요소(os타임 차이가 있을수도 있어서)